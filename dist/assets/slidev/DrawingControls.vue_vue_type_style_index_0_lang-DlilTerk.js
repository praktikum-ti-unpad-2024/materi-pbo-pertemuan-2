import{d as z,r as $,Y as j,aK as E,f as B,o as f,k as M,T as e,j as N,b as C,i as L,n,w as a,e as i,g as l,t as R,ah as w,ai as A,F,aj as P,am as k}from"../modules/vue-a-ZG5QjA.js";import{L as T}from"../modules/shiki-BSV5HcrO.js";import{u as Y}from"./DrawingPreview.vue_vue_type_script_setup_true_lang-DWneaJ0F.js";import{_ as o}from"./IconButton.vue_vue_type_script_setup_true_lang-Cot17q3W.js";import{V as x}from"./shortcuts-BosnVEpn.js";const q=z({__name:"Draggable",props:{storageKey:{},initial:{}},setup(D){const u=D,_=$(null),g=u.initial??{x:0,y:0},b=u.storageKey?j(u.storageKey,g):$(g),{style:h}=E(_,{initialValue:b});return(m,c)=>(f(),B("div",{ref_key:"el",ref:_,class:"fixed",style:M(e(h))},[N(m.$slots,"default")],4))}}),G=l("div",{class:"i-carbon:pen"},null,-1),H=l("svg",{width:"1em",height:"1em",class:"-mt-0.5",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[l("path",{d:"M21.71 3.29a1 1 0 0 0-1.42 0l-18 18a1 1 0 0 0 0 1.42a1 1 0 0 0 1.42 0l18-18a1 1 0 0 0 0-1.42z",fill:"currentColor"})],-1),I=l("div",{class:"i-carbon:arrow-up-right"},null,-1),J=l("div",{class:"i-carbon:radio-button"},null,-1),O=l("div",{class:"i-carbon:checkbox"},null,-1),Q=l("div",{class:"i-carbon:erase"},null,-1),W=l("svg",{viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},[l("line",{x1:"2",y1:"15",x2:"22",y2:"4",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round"}),l("line",{x1:"2",y1:"24",x2:"28",y2:"10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),l("line",{x1:"7",y1:"31",x2:"29",y2:"19",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round"})],-1),X={class:"flex bg-main p-2"},Z={class:"inline-block w-7 text-center"},ee={class:"pt-.5"},se=l("div",{class:"i-carbon:undo"},null,-1),le=l("div",{class:"i-carbon:redo"},null,-1),te=l("div",{class:"i-carbon:trash-can"},null,-1),ae={class:"i-carbon:pin-filled transform -rotate-45"},ne={class:"i-carbon:pin"},ie={class:"i-carbon:error"},oe={class:"i-carbon:close-outline"},we=z({__name:"DrawingControls",setup(D){const{brush:u,canClear:_,canRedo:g,canUndo:b,clear:h,drauu:m,drawingEnabled:c,drawingMode:r,drawingPinned:d,brushColors:V}=Y();function S(){m.undo()}function K(){m.redo()}let y="stylus";function v(p){r.value=p,c.value=!0,p!=="eraseLine"&&(y=p)}function U(p){u.color=p,c.value=!0,r.value=y}return(p,s)=>e(c)||e(d)?(f(),C(q,{key:0,class:n(["flex flex-wrap text-xl p-2 gap-1 rounded-md bg-main shadow transition-opacity duration-200 z-nav border border-main",!e(c)&&e(d)?"opacity-40 hover:opacity-90":""]),"storage-key":"slidev-drawing-pos","initial-x":10,"initial-y":10},{default:a(()=>[i(o,{title:"Draw with stylus",class:n({shallow:e(r)!=="stylus"}),onClick:s[0]||(s[0]=t=>v("stylus"))},{default:a(()=>[G]),_:1},8,["class"]),i(o,{title:"Draw a line",class:n({shallow:e(r)!=="line"}),onClick:s[1]||(s[1]=t=>v("line"))},{default:a(()=>[H]),_:1},8,["class"]),i(o,{title:"Draw an arrow",class:n({shallow:e(r)!=="arrow"}),onClick:s[2]||(s[2]=t=>v("arrow"))},{default:a(()=>[I]),_:1},8,["class"]),i(o,{title:"Draw an ellipse",class:n({shallow:e(r)!=="ellipse"}),onClick:s[3]||(s[3]=t=>v("ellipse"))},{default:a(()=>[J]),_:1},8,["class"]),i(o,{title:"Draw a rectangle",class:n({shallow:e(r)!=="rectangle"}),onClick:s[4]||(s[4]=t=>v("rectangle"))},{default:a(()=>[O]),_:1},8,["class"]),i(o,{title:"Erase",class:n({shallow:e(r)!=="eraseLine"}),onClick:s[5]||(s[5]=t=>v("eraseLine"))},{default:a(()=>[Q]),_:1},8,["class"]),i(x),i(e(T),null,{popper:a(()=>[l("div",X,[l("div",Z,R(e(u).size),1),l("div",ee,[w(l("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>e(u).size=t),type:"range",min:"1",max:"15",onChange:s[7]||(s[7]=t=>r.value=e(y))},null,544),[[A,e(u).size]])])])]),default:a(()=>[i(o,{title:"Adjust stroke width",class:n({shallow:e(r)==="eraseLine"})},{default:a(()=>[W]),_:1},8,["class"])]),_:1}),(f(!0),B(F,null,P(e(V),t=>(f(),C(o,{key:t,title:"Set brush color",class:n(e(u).color===t&&e(r)!=="eraseLine"?"active":"shallow"),onClick:re=>U(t)},{default:a(()=>[l("div",{class:n(["w-6 h-6 transition-all transform border",e(u).color!==t?"rounded-1/2 scale-85 border-white":"rounded-md border-gray-300/50"]),style:M(e(c)?{background:t}:{borderColor:t})},null,6)]),_:2},1032,["class","onClick"]))),128)),i(x),i(o,{title:"Undo",class:n({disabled:!e(b)}),onClick:s[8]||(s[8]=t=>S())},{default:a(()=>[se]),_:1},8,["class"]),i(o,{title:"Redo",class:n({disabled:!e(g)}),onClick:s[9]||(s[9]=t=>K())},{default:a(()=>[le]),_:1},8,["class"]),i(o,{title:"Delete",class:n({disabled:!e(_)}),onClick:s[10]||(s[10]=t=>e(h)())},{default:a(()=>[te]),_:1},8,["class"]),i(x),i(o,{title:e(d)?"Unpin drawing":"Pin drawing",class:n({shallow:!e(d)}),onClick:s[11]||(s[11]=t=>d.value=!e(d))},{default:a(()=>[w(l("div",ae,null,512),[[k,e(d)]]),w(l("div",ne,null,512),[[k,!e(d)]])]),_:1},8,["title","class"]),e(c)?(f(),C(o,{key:0,title:e(d)?"Drawing pinned":"Drawing unpinned",class:n({shallow:!e(c)}),onClick:s[12]||(s[12]=t=>c.value=!e(c))},{default:a(()=>[w(l("div",ie,null,512),[[k,e(d)]]),w(l("div",oe,null,512),[[k,!e(d)]])]),_:1},8,["title","class"])):L("",!0)]),_:1},8,["class"])):L("",!0)}});export{we as _};
