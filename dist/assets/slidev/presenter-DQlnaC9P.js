import{ak as Q,z as b,d as F,b as p,T as t,n as S,o as s,al as Y,Q as z,f as m,ah as A,i as N,am as O,g as e,ad as T,r as M,K as L,Y as J,L as X,P as Z,an as ee,e as i,B as te,w as y,k as V,a9 as E,t as se,F as oe,q as ne,s as ae}from"../modules/vue-a-ZG5QjA.js";import{a as re,u as ie,e as le,h as ce,j as ue,k as de,l as me,m as ve,s as pe,d as fe,n as _e,_ as xe}from"../index-B7NdEJpk.js";import{u as he}from"./DrawingPreview.vue_vue_type_script_setup_true_lang-DWneaJ0F.js";import{r as ke,u as ge,a as ye,_ as be,o as Se,b as we,S as Ce,G as $e,c as Te,d as Me}from"./shortcuts-BosnVEpn.js";import{C as ze}from"./ClicksSlider-cAUPnERr.js";import{_ as Ne}from"./DrawingControls.vue_vue_type_style_index_0_lang-DlilTerk.js";import{_ as P}from"./IconButton.vue_vue_type_script_setup_true_lang-Cot17q3W.js";import{_ as Fe}from"./NoteDisplay.vue_vue_type_style_index_0_lang-B24_gdsA.js";import{a as je,S as R}from"./SlideContainer-DZgB5B5r.js";import{S as Be}from"./SlideWrapper-D9Kw6Vtd.js";import"../modules/shiki-BSV5HcrO.js";import"./context-BdhbaHph.js";import"../modules/unplugin-icons-PFMis6Oz.js";function De(){const{counter:c,isActive:o,reset:a,pause:n,resume:u}=Q(1e3,{controls:!0});return{timer:b(()=>{const h=c.value,w=Math.floor(h%60).toString().padStart(2,"0");return`${Math.floor(h/60).toString().padStart(2,"0")}:${w}`}),isTimerActive:o,resetTimer:a,toggleTimer:()=>o.value?n():u()}}const Ie=F({__name:"NoteStatic",props:{no:{},class:{},clicksContext:{}},setup(c){const o=c,{info:a}=je(o.no);return(n,u)=>(s(),p(Fe,{class:S(o.class),note:t(a)?.note,"note-html":t(a)?.noteHTML,"clicks-context":n.clicksContext},null,8,["class","note","note-html","clicks-context"]))}}),Le={"h-full":"","w-full":""},Ve={key:0,"w-full":"","h-full":"",flex:"~ col gap-4 items-center justify-center"},Ee=e("div",{op50:""},[T(" Use screen capturing to mirror your main screen back to presenter view."),e("br"),T(" Click the button below and "),e("b",null,"select your other monitor or window"),T(". ")],-1),Pe=F({__name:"ScreenCaptureMirror",setup(c){const o=Y("video"),a=z(null),n=z(!1);async function u(){a.value=await navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!1,selfBrowserSurface:"include",preferCurrentTab:!1}),o.value.srcObject=a.value,o.value.play(),n.value=!0,a.value.addEventListener("inactive",()=>{o.value.srcObject=null,n.value=!1}),a.value.addEventListener("ended",()=>{o.value.srcObject=null,n.value=!1})}return(x,h)=>(s(),m("div",Le,[A(e("video",{ref_key:"video",ref:o,class:"w-full h-full object-contain"},null,512),[[O,n.value]]),n.value?N("",!0):(s(),m("div",Ve,[Ee,e("button",{class:"slidev-form-button",onClick:u}," Start Screen Mirroring ")]))]))}}),l=c=>(ne("data-v-7ddaf9bf"),c=c(),ae(),c),Re={class:"bg-main h-full slidev-presenter","pt-2px":""},Ae={flex:"~ gap-4 items-center",border:"b main",p1:""},Oe=l(()=>e("span",{op50:"",px2:""},"Current",-1)),We=l(()=>e("div",{"flex-auto":""},null,-1)),qe={class:"relative grid-section next flex flex-col p-2 lg:p-4"},Ge={key:1,class:"h-full flex justify-center items-center"},He=l(()=>e("div",{class:"text-gray-500"}," End of the presentation ",-1)),Ue=[He],Ke=l(()=>e("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1)),Qe={key:0,class:"grid-section note of-auto"},Ye={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Je=l(()=>e("div",{"border-t":"","border-main":""},null,-1)),Xe=l(()=>e("div",{class:"i-carbon:zoom-in"},null,-1)),Ze=l(()=>e("div",{class:"i-carbon:zoom-out"},null,-1)),et={class:"grid-section bottom flex"},tt=l(()=>e("div",{"flex-auto":""},null,-1)),st={class:"group flex items-center justify-center pl-4 select-none"},ot={class:"w-22px cursor-pointer"},nt=l(()=>e("div",{class:"i-carbon:time group-hover:hidden text-xl"},null,-1)),at={class:"group-not-hover:hidden flex flex-col items-center"},rt={key:0,class:"i-carbon:pause text-lg"},it={key:1,class:"i-carbon:play"},lt=l(()=>e("div",{class:"i-carbon:renew"},null,-1)),ct=[lt],ut={class:"text-2xl px-3 my-auto tabular-nums"},dt={class:"progress-bar"},mt=F({__name:"presenter",setup(c){const o=E(),a=M();ke(),ge(a),ye();const{clicksContext:n,currentSlideNo:u,currentSlideRoute:x,hasNext:h,nextRoute:w,slides:j,getPrimaryClicks:W,total:q}=re(),{isDrawing:G}=he();ie({title:`Presenter - ${pe}`}),M(!1);const{timer:H,isTimerActive:U,resetTimer:B,toggleTimer:D}=De(),K=b(()=>j.value.map(f=>{const r=M(0);return{context:le(r,f?.meta.slide?.frontmatter.clicksStart??0,f?.meta.clicks),clicks:r}})),d=b(()=>n.value.current<n.value.total?[x.value,n.value.current+1]:h.value?[w.value,0]:null),g=b(()=>d.value&&K.value[d.value[0].no-1]);L(d,()=>{g.value&&d.value&&(g.value.clicks.value=d.value[1])},{immediate:!0});const k=J("slidev-presenter-main-slide-mode","slides"),I=z();return X(()=>{const f=a.value.querySelector("#slide-content"),r=Z(ee()),v=E();L(()=>{if(!v.value||G.value||!_e.value||!f)return;const _=f.getBoundingClientRect(),C=(r.x-_.left)/_.width*100,$=(r.y-_.top)/_.height*100;if(!(C<0||C>100||$<0||$>100))return{x:C,y:$}},_=>{fe.cursor=_})}),(f,r)=>(s(),m(oe,null,[e("div",Re,[e("div",{class:S(["grid-container",`layout${t(ce)}`])},[e("div",{ref_key:"main",ref:a,class:"relative grid-section main flex flex-col"},[e("div",Ae,[Oe,We,i(be,{modelValue:t(k),"onUpdate:modelValue":r[0]||(r[0]=v=>te(k)?k.value=v:null),options:[{label:"Slides",value:"slides"},{label:"Screen Mirror",value:"mirror"}]},null,8,["modelValue"])]),t(k)==="mirror"?(s(),p(Pe,{key:0})):N("",!0),A(i(R,{key:"main",class:"p-2 lg:p-4 flex-auto","is-main":"",onContextmenu:t(Se)},{default:y(()=>[i(Ce,{"render-context":"presenter"})]),_:1},8,["onContextmenu"]),[[O,t(k)==="slides"]]),(s(),p(ze,{key:t(x)?.no,"clicks-context":t(W)(t(x)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"]))],512),e("div",qe,[d.value&&g.value?(s(),p(R,{key:"next"},{default:y(()=>[(s(),p(Be,{key:d.value[0].no,"clicks-context":g.value.context,route:d.value[0],"render-context":"previewNext"},null,8,["clicks-context","route"]))]),_:1})):(s(),m("div",Ge,Ue)),Ke]),I.value&&t(ue)?(s(),m("div",Qe,[i(t(I))])):(s(),m("div",Ye,[(s(),p(Ie,{key:`static-${t(u)}`,no:t(u),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:V({fontSize:`${t(de)}em`}),"clicks-context":t(n)},null,8,["no","style","clicks-context"])),Je,e("div",{class:S(["py-1 px-2 text-sm transition",t(o)?"":"op25"])},[i(P,{title:"Increase font size",onClick:t(me)},{default:y(()=>[Xe]),_:1},8,["onClick"]),i(P,{title:"Decrease font size",onClick:t(ve)},{default:y(()=>[Ze]),_:1},8,["onClick"]),N("",!0)],2)])),e("div",et,[i(we,{persist:!0,class:S(["transition",t(o)?"":"op25"])},null,8,["class"]),tt,e("div",st,[e("div",ot,[nt,e("div",at,[e("div",{class:"relative op-80 hover:op-100",onClick:r[3]||(r[3]=(...v)=>t(D)&&t(D)(...v))},[t(U)?(s(),m("div",rt)):(s(),m("div",it))]),e("div",{class:"op-80 hover:op-100",onClick:r[4]||(r[4]=(...v)=>t(B)&&t(B)(...v))},ct)])]),e("div",ut,se(t(H)),1)])]),(s(),p(Ne,{key:2}))],2),e("div",dt,[e("div",{class:"progress h-3px bg-primary transition-all",style:V({width:`${(t(u)-1)/(t(q)-1)*100+1}%`})},null,4)])]),i($e),i(Te),i(Me)],64))}}),$t=xe(mt,[["__scopeId","data-v-7ddaf9bf"]]);export{$t as default};
